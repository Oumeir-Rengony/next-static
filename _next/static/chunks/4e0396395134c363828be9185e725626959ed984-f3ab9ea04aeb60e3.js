"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1060],{67889:function(o,l,i){i.d(l,{x:function(){return p}});var e=i(47568),n=i(51438),t=i(20414),d=i(79340),a=i(12766),r=i(56626),v=i(7424),c=i(18263),u=i(39695),s=i(98193),m=v.do,f=v.Fy,E=v.y6,_=v.qQ,h=v.$0,p=function(){function o(){(0,n.Z)(this,o)}return o.AddGlobalErrorResetEmail=function(o){var l=null===document||void 0===document?void 0:document.querySelector(".webservice-error");l&&(l.innerHTML=o)},o.AddGlobalErrorSetEmail=function(o){var l=null===document||void 0===document?void 0:document.querySelector(".confirmEmailAddress .webservice-error");l&&(l.innerHTML=o)},o}();p.GetResetEmailForm=function(){var o=(0,e.Z)((function(o,l){return(0,t.__generator)(this,(function(i){switch(i.label){case 0:return[4,(0,d.rN)(o,l)];case 1:return[2,i.sent()]}}))}));return function(l,i){return o.apply(this,arguments)}}(),p.GetResetEmailProps=function(o,l){var i,n,d,a,r,v="";(null===Array||void 0===Array?void 0:Array.isArray(null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.fields))&&(null===o||void 0===o||null===(a=o.data)||void 0===a||null===(r=a.fields)||void 0===r||r.forEach((function(o){"submitbutton"===(null===o||void 0===o?void 0:o.FieldName)&&(v=null===o||void 0===o?void 0:o.label_system)})));return{crmForm:o,handlerSubmit:(0,e.Z)((function(){var o;return(0,t.__generator)(this,(function(i){return p.PostResetEmail(null===l||void 0===l||null===(o=l.resetEmail)||void 0===o?void 0:o.errorMessage),[2]}))})),eventLabel:v,analytics:{gaClass:"event_button_click",event_action:"event_informational_action",eventLabelValid:"".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.cta).concat(null===h||void 0===h?void 0:h.all).concat(null===(n=null===v||void 0===v?void 0:v.split(" ").join("-"))||void 0===n?void 0:n.toLowerCase()),gaClassError:"event_profile_edit_profile_submit_error",eventLabelError:"".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.cta).concat(null===h||void 0===h?void 0:h.all,"VerifyEmail_signInEmailAddress_").concat(null===l||void 0===l||null===(d=l.resetEmail)||void 0===d?void 0:d.errorMessage),currentEmailError:{mandetoryField:"".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.other).concat(null===h||void 0===h?void 0:h.all,"EditProfile_signInEmailAddress_please-fill-out-this-field"),invalidEmail:"".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.other).concat(null===h||void 0===h?void 0:h.all,"EditProfile_signInEmailAddress_please-enter-a-valid-email.")}}}},p.GetSetNewEmailProps=function(o,l,i,n){var d,a,r,v,c="";(null===Array||void 0===Array?void 0:Array.isArray(null===o||void 0===o||null===(d=o.data)||void 0===d?void 0:d.fields))&&(null===o||void 0===o||null===(r=o.data)||void 0===r||null===(v=r.fields)||void 0===v||v.forEach((function(o){"submitbutton"===(null===o||void 0===o?void 0:o.FieldName)&&(c=null===o||void 0===o?void 0:o.label_system)})));return{crmForm:o,handlerSubmit:(0,e.Z)((function(){var o;return(0,t.__generator)(this,(function(e){return p.PostSetNewEmail(l,i,null===n||void 0===n||null===(o=n.resetEmail)||void 0===o?void 0:o.errorMessage),[2]}))})),authorizationCode:l,eventLabel:i.title,analytics:{gaClassValid:"event_profile_update_submit",eventLabelValid:"".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.cta).concat(null===h||void 0===h?void 0:h.all).concat(null===(a=null===c||void 0===c?void 0:c.split(" ").join("-"))||void 0===a?void 0:a.toLowerCase()),newEmailError:{mandetoryField:"".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.other).concat(null===h||void 0===h?void 0:h.all,"EditProfile_newEmailAddress_please-fill-out-this-field"),invalidEmail:"".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.other).concat(null===h||void 0===h?void 0:h.all,"EditProfile_newEmailAddress_please-enter-a-valid-email.")},confirmEmailError:{mandetoryField:"".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.other).concat(null===h||void 0===h?void 0:h.all,"EditProfile_confirmEmailAddress_please-fill-out-this-field"),newEmailMatch:"".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.other).concat(null===h||void 0===h?void 0:h.all,"EditProfile_confirmEmailAddress_new-email-address-must-match"),invalidEmail:"".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.other).concat(null===h||void 0===h?void 0:h.all,"EditProfile_confirmEmailAddress_please-enter-a-valid-email.")}}}},p.GetResetemailHeaderProps=function(o,l){var i,e,n,t;return{showBackBtn:!0,logo:{title:(null===r||void 0===r||null===(i=r.SEO)||void 0===i?void 0:i.Brand)||o.logo.title,srcset:(null===r||void 0===r||null===(e=r.SEO)||void 0===e?void 0:e.EmbeddedLogo)||o.logo.url,alt:(null===r||void 0===r||null===(n=r.SEO)||void 0===n?void 0:n.Brand)||o.logo.title},className:"login-header event_button_click",backBtnLabel:null===l||void 0===l||null===(t=l.resetEmail)||void 0===t?void 0:t.backBtnLabel,backBtnEventLabel:"".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.hyperlink).concat(null===h||void 0===h?void 0:h.all,"back-cta"),backBtnUrl:encodeURI((0,a.Dp)("EditEmailPreviousPageUrl"))}},p.GetSetNewemailHeaderProps=function(o){var l,i,e;return{showBackBtn:!1,logo:{title:(null===r||void 0===r||null===(l=r.SEO)||void 0===l?void 0:l.Brand)||o.logo.title,srcset:(null===r||void 0===r||null===(i=r.SEO)||void 0===i?void 0:i.EmbeddedLogo)||o.logo.url,alt:(null===r||void 0===r||null===(e=r.SEO)||void 0===e?void 0:e.Brand)||o.logo.title},className:"login-header event_button_click",backBtnLabel:""}},p.PostResetEmail=function(){var o=(0,e.Z)((function(o){var l,i,e,n,v,c,u;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return"VerifyEmail",e=(0,a.Ps)({by:"id",value:"reset-password-form-id"}),n=e.randomNumber,v=(0,a.Ue)(n),p.AddLoader(v),[4,(0,d.B$)("VerifyEmail",e)];case 1:return"OK"===(null===(c=t.sent())||void 0===c?void 0:c.result)&&(null===c||void 0===c||null===(l=c.data)||void 0===l?void 0:l.success)&&(0,a.L8)(null===r||void 0===r||null===(i=r.Pages)||void 0===i?void 0:i.ThankYouResetEmail)?window.location.href=encodeURI(null===r||void 0===r||null===(u=r.Pages)||void 0===u?void 0:u.ThankYouResetEmail):(p.AddGlobalErrorResetEmail(o),console.error("Failed!! Reset email")),p.RemoveLoader(v),[2]}}))}));return function(l){return o.apply(this,arguments)}}(),p.PostSetNewEmail=function(){var o=(0,e.Z)((function(o,l,i){var n,v,c,b,g,y,w,A,L,P,S,R,C,k;return(0,t.__generator)(this,(function(B){switch(B.label){case 0:return(0,s.EE)("event_crm_action","event_profile_update_detail","".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.cta).concat(null===h||void 0===h?void 0:h.all,"new-email-update")),(0,s.EE)("event_crm_action","event_profile_update_detail","".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.cta).concat(null===h||void 0===h?void 0:h.all,"confirm-email-update")),c="EditProfile",b=null,g=(null===(v=null===l||void 0===l||null===(n=l.relatedLandingPageCollection)||void 0===n?void 0:n.items[0])||void 0===v?void 0:v.path)||"",(y=(0,a.Ps)({by:"id",value:"reset-password-form-id"})).decryptParams=!1,w=y.randomNumber,A=(0,a.Ue)(w),p.AddLoader(A),[4,p.VerifyCodeFromEmail(o,i)];case 1:return(b=B.sent())?(P={emailAddress:null===y||void 0===y?void 0:y.confirmEmailAddress,access_token:b},[4,p.GetUserUuid(b)]):[3,4];case 2:return S=B.sent(),[4,(0,d.B$)(c,P)];case 3:return"OK"===(null===(R=B.sent())||void 0===R?void 0:R.result)&&(null===R||void 0===R||null===(L=R.data)||void 0===L?void 0:L.success)?p.SendConfirmationEmailService(S).then((function(o){null===localStorage||void 0===localStorage||localStorage.setItem("resetEmailInstantMessage","true"),p.RemoveLoader(A),(0,u.MY)()?window.location.href=encodeURI("/".concat(null===r||void 0===r?void 0:r.locale).concat(g)):window.location.href="/"})).catch(function(){var o=(0,e.Z)((function(o){var l;return(0,t.__generator)(this,(function(e){return console.log("Incentive Distribution Error ",o),p.AddGlobalErrorSetEmail(i),p.RemoveLoader(A),(0,s.EE)("event_crm_action","event_profile_edit_profile_submit_error","".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.other).concat(null===h||void 0===h?void 0:h.all,"EditProfile_newEmailAddress_").concat(null===(l=null===i||void 0===i?void 0:i.split(" ").join("-"))||void 0===l?void 0:l.toLowerCase())),[2]}))}));return function(l){return o.apply(this,arguments)}}()):(p.AddGlobalErrorSetEmail(i),p.RemoveLoader(A),(0,s.EE)("event_crm_action","event_profile_edit_profile_submit_error","".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.other).concat(null===h||void 0===h?void 0:h.all,"EditProfile_newEmailAddress_").concat(null===(C=null===i||void 0===i?void 0:i.split(" ").join("-"))||void 0===C?void 0:C.toLowerCase()))),[3,5];case 4:(0,s.EE)("event_crm_action","event_profile_edit_profile_submit_error","".concat(null===m||void 0===m?void 0:m.eng).concat(null===_||void 0===_?void 0:_.allsite).concat(null===E||void 0===E?void 0:E.other).concat(null===f||void 0===f?void 0:f.other).concat(null===h||void 0===h?void 0:h.all,"EditProfile_newEmailAddress_").concat(null===(k=null===i||void 0===i?void 0:i.split(" ").join("-"))||void 0===k?void 0:k.toLowerCase())),p.RemoveLoader(A),B.label=5;case 5:return[2]}}))}));return function(l,i,e){return o.apply(this,arguments)}}(),p.VerifyCodeFromEmail=function(){var o=(0,e.Z)((function(o,l){var i,e,n;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return"VerifyCodeFromEmail",e={verification_code:o},[4,(0,d.B$)("VerifyCodeFromEmail",e)];case 1:return"OK"===(null===(n=t.sent())||void 0===n?void 0:n.result)&&(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.success)?[2,n.data.accessToken]:(p.AddGlobalErrorSetEmail(l),[2,null])}}))}));return function(l,i){return o.apply(this,arguments)}}(),p.AddLoader=function(o){var l=o.getElementsByClassName("btn")[0];l.classList.add("loading"),l.setAttribute("disabled","disabled")},p.RemoveLoader=function(o){var l=o.getElementsByClassName("btn")[0];l.classList.remove("loading"),l.removeAttribute("disabled")},p.SendConfirmationEmailService=function(){var o=(0,e.Z)((function(o){var l,i,e,n,d,a,v,u,s,m;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return v=null===r||void 0===r||null===(l=r.Microservices)||void 0===l||null===(i=l.RTTM)||void 0===i?void 0:i.URL,u=(null===r||void 0===r||null===(e=r.Microservices)||void 0===e||null===(n=e.RTTM)||void 0===n?void 0:n.ResetEmailOperationName)||"",s={"Content-Type":"application/json","Ocp-Apim-Subscription-Key":null===r||void 0===r||null===(d=r.Microservices)||void 0===d||null===(a=d.RTTM)||void 0===a?void 0:a.OcpApimSubscriptionKey,"Cache-Control":"no-store"},m={UserId:o,OperationName:u},[4,(0,c.xA)(v,"POST",m,s)];case 1:return[2,t.sent()]}}))}));return function(l){return o.apply(this,arguments)}}(),p.GetUserUuid=function(){var o=(0,e.Z)((function(o){var l,i,e,n,a;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return"EntityRetrieve",l={access_token:o},[4,(0,d.B$)("EntityRetrieve",l)];case 1:return"OK"===(null===(i=t.sent())||void 0===i?void 0:i.result)?[2,null===i||void 0===i||null===(e=i.data)||void 0===e||null===(n=e.customData)||void 0===n||null===(a=n.result)||void 0===a?void 0:a.Uuid]:[2,null]}}))}));return function(l){return o.apply(this,arguments)}}()}}]);